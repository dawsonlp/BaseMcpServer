#!/bin/bash
# MCP Server Wrapper Script for {{ server.name }}
# Generated by mcp-manager on {{ timestamp }}
# DO NOT EDIT THIS FILE MANUALLY

# Get the directory of this script
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"

# Server environment variables
export MCP_SERVER_NAME="{{ server.name }}"
export MCP_SERVER_HOME="{{ server_dir }}"

# Activate the virtual environment
source "{{ venv_activate }}"

# Set PYTHONPATH to include the source directory
export PYTHONPATH="{{ source_dir }}:${PYTHONPATH}"

# Go to the source directory
cd "{{ source_dir }}"

# Run the server with stdio transport by default (used by VS Code Cline)
# To use HTTP+SSE transport, add "sse" as an argument
if [ "$1" == "sse" ]; then
    echo "Starting {{ server.name }} with HTTP+SSE transport"
    exec python main.py sse
else
    echo "Starting {{ server.name }} with stdio transport"
    exec python main.py stdio
fi
